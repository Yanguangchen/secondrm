rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    function isAdmin() {
      return request.auth != null
             && (request.auth.token.email == "gracechen.info@gmail.com"
                || request.auth.token.email == "yanguangchensp@gmail.com"
                || request.auth.token.email == "patricia.marie.r.faraon@gmail.com");
    }

    // Publicly readable content for marketing pages (e.g., corebuildlab.html).
    match /page_content/{docId} {
      allow read: if true;
      allow write: if isAdmin();
    }

    // Form submissions: readable/editable only by admins. Writes from clients are blocked;
    // Cloud Functions using the admin SDK bypass these rules.
    match /form_submissions/{docId} {
      allow read: if isAdmin();
      allow write: if isAdmin();
    }

    // Default: admin-only read/write.
    match /{document=**} {
      allow read: if isAdmin();
      allow write: if isAdmin();
    }
  }
}


